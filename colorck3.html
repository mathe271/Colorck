<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Colorck</title>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script>

      var saturation = 0.5; // 彩度　0 ~ 1
      var lightness = 1;    // 明度　0 ~ 1

      window.onload = function() {
      init();
      };

      function init(){
      draw();
      setInterval('draw();',1000);
      }

      // 時計を描画する
      function draw() {

          // 円のスタイルを定義する
          // radius はキャンバスサイズに対する比率
          var circle = {
              ColorWheel: {
                  radius  : 1.0,
              },
              hour: {
                  radius  : 0.9,
              },
              minute: {
                  radius  : 0.8,
              },
              second: {
                  radius  : 0.7,
              }
          };

          // 目盛りのスタイルを定義する
          // from, to はキャンバスサイズに対する比率
          var lines = {
              long: {
                  from    : 0.8,
                  to      : 0,
                  width   : 2,
              },
              short: {
                  from    : 0.8,
                  to      : 0.7,
                  width   : 2,
              }
          };

          // キャンバスを設定する
          var canvas = document.getElementById("canvas");
          canvas.width = 360;
          canvas.height = 360;
          var context = canvas.getContext("2d");
          var center = {
              x: Math.floor(canvas.width / 2),
              y: Math.floor(canvas.height / 2)
          };
          var radius = Math.min(center.x, center.y);
          var angle;
          var len;

          // 現在時刻を取得する
          var date = new Date();
          var h = date.getHours() % 12;
          var m = date.getMinutes();
          var s = date.getSeconds();
          var hms = h*3600 + m*60 + s

          HourAngle = Math.PI * (h + m / 60) / 6 - Math.PI * (1 / 2);　
          MinuteAngle = Math.PI * (m + s / 60) / 30 - Math.PI * (1 / 2);
          SecondAngle = Math.PI * s / 30 - Math.PI * (1 / 2);

          var color = 111111
          var AngleList = [[HourAngle,110000,"r"],[MinuteAngle,1100,"g"],[SecondAngle,11,"b"]];
          var sortAngleList = AngleList.sort();
          console.log(sortAngleList);


//          drawSector(context, center.x, center.y, radius * circle.ColorWheel.radius, -1 * Math.PI * (1 / 2), 360*Math.PI/180, false, "#000000");
//          drawSector(context, center.x, center.y, radius * circle.hour.radius, -1 * Math.PI * (1 / 2), HourAngle, false, "#FF0000");
//          drawSector(context, center.x, center.y, radius * circle.minute.radius, -1 * Math.PI * (1 / 2), MinuteAngle, false, "#00FF00");
//          drawSector(context, center.x, center.y, radius * circle.second.radius, -1 * Math.PI * (1 / 2), SecondAngle, false, "#FFFFFF");

          drawSector(context, center.x, center.y, radius * circle.ColorWheel.radius, -1 * Math.PI * (1 / 2), sortAngleList[0][0], false, toColor(color));
          color = color - sortAngleList[0][1];
          console.log(toColor(color))

          drawSector(context, center.x, center.y, radius * circle.ColorWheel.radius, sortAngleList[0][0], sortAngleList[1][0], false, toColor(color));
          color = color - sortAngleList[1][1];
          console.log(toColor(color))

          drawSector(context, center.x, center.y, radius * circle.ColorWheel.radius, sortAngleList[1][0], sortAngleList[2][0], false, toColor(color));
          color = color - sortAngleList[2][1];
          console.log(toColor(color))

 //         drawSector(context, center.x, center.y, radius * circle.ColorWheel.radius, sortAngleList[2][0], 360 * Math.PI/180, false, "#000000");

          //context.arc(center.x, center.y, radius * circle.ColorWheel.radius, -1 * Math.PI * (1 / 2), HourAngle, false);
          //context.arc(center.x, center.y, radius * circle.ColorWheel.radius, -1 * Math.PI * (1 / 2), MinuteAngle, false);
          //context.arc(center.x, center.y, radius * circle.ColorWheel.radius, -1 * Math.PI * (1 / 2), SecondAngle, false);

      }

      function hsvToRGB(hue, saturation, value) {
          var hi;
          var f;
          var p;
          var q;
          var t;

          while (hue < 0) {
              hue += 360;
          }
          hue = hue % 360;

          saturation = saturation < 0 ? 0
              : saturation > 1 ? 1
              : saturation;

          value = value < 0 ? 0
              : value > 1 ? 1
              : value;

          value *= 255;
              hi = (hue / 60 | 0) % 6;
              f = hue / 60 - hi;
              p = value * (1 -           saturation) | 0;
              q = value * (1 -      f  * saturation) | 0;
              t = value * (1 - (1 - f) * saturation) | 0;
          value |= 0;

          switch (hi) {
              case 0:
                  return [value, t, p];
              case 1:
                  return [q, value, p];
              case 2:
                  return [p, value, t];
              case 3:
                  return [p, q, value];
              case 4:
                  return [t, p, value];
              case 5:
                  return [value, p, q];
          }

          throw new Error('invalid hue');
      }

      // 16進数変換用
      function toHex(v) {
          return ("00" + v.toString(16)).slice(-2).toUpperCase();
      }

      // HSL → #xxxxxx
      function hsvToRgb2(H,S,V) {
          //https://en.wikipedia.org/wiki/HSL_and_HSV#From_HSV

          var C = V * S;
          var Hp = H / 60;
          var X = C * (1 - Math.abs(Hp % 2 - 1));

          var R, G, B;
          if (0 <= Hp && Hp < 1) {[R,G,B]=[C,X,0]};
          if (1 <= Hp && Hp < 2) {[R,G,B]=[X,C,0]};
          if (2 <= Hp && Hp < 3) {[R,G,B]=[0,C,X]};
          if (3 <= Hp && Hp < 4) {[R,G,B]=[0,X,C]};
          if (4 <= Hp && Hp < 5) {[R,G,B]=[X,0,C]};
          if (5 <= Hp && Hp < 6) {[R,G,B]=[C,0,X]};

          var m = V - C;
          [R, G, B] = [R+m, G+m, B+m];

          R = Math.floor(R * 255);
          G = Math.floor(G * 255);
          B = Math.floor(B * 255);

          return "#" + toHex(R) + toHex(G) + toHex(B);
      }

      function drawSector(context,x,y,radius, startAngle, endAngle, counterclockwise, color) {
          context.beginPath();
          context.moveTo(x, y);
          context.arc(x, y, radius, startAngle, endAngle, false);
          context.closePath();
          context.fillStyle = color;
          context.fill();
      }

      function toColor(n) {
          switch (n) {
              case 111111:
                  return "#FFFFFF";
              case 111100:
                  return "#FFFF00";
              case 110000:
                  return "#FF0000";
              case 1111:
                  return "#00FFFF";
              case 1100:
                  return "#00FF00";
              case 11:
                  return "#0000FF";
              case 0:
                  return "#000000";
          }
      }

    </script>

</body>
</html>

<!-- 参考にしたサイト
https://qiita.com/okuchan/items/3c6908c5c90e5a70deab
http://imaya.blog.jp/archives/6733658.html
https://qiita.com/hachisukansw/items/633d1bf6baf008e82847
https://www.oikawa-sekkei.com/web/design/html/html5-canvas-clock.html -->
